### 中转管理  
此菜单分为管理员和普通用户角色划分。管理员可查看所有用户的所有中转规则、到期时间以及流量使用情况，普通用户只能查看已分配的服务器中转规则，自己的到期时间以及流量使用情况。
![中转管理](https://github.com/noobcfy/wikis/blob/dev/Screenshots/forward.png)  

#### 开启
点击开启中转，选择端口功能，目前可选择11种转发方式，具体能否支持看管理员对服务器安装和开启的转发方式为准。未安装和未开启均会转发失败。
![开启中转](https://github.com/noobcfy/wikis/blob/dev/Screenshots/start-forword.png)  
  

#### 重启所有  

可一键重新开启所有显示为已开启的中转规则。此功能用于，服务器重启、重装、系统升级、误操作等等转发失效情况使用。管理员使用是对所有系统重启，普通用户使用仅针对自身的转发规则。  

#### iperf3

此功能依赖管理员安装并开通 iperf3 插件，点击开启后服务器即对 所选端口开启iperf3 服务端模式，以便用户进行线路测试。  开启成功后点击卡片右上角 即可复制命令。默认命令为单线正向 tcp.  
```shell
iperf3 -c xxxx -p ooo
```

本功能处于安全考虑，系统每 15 分钟清理一次 iperf3 进程。会自动关闭相关 端口的iperf3 功能。


## 进阶功能说明（2021-6-9）

### 新增自定义端口
  ![自定义端口](https://github.com/noobcfy/wikis/blob/dev/Screenshots/select-port.png) 
  此功能必须管理员开启该服务器的自定义端口功能（服务器管理-端口维护）并为该用户设置足够的最大端口数（用户管理-端口分配-选择服务器）。  
  新增自定义端口策略：可选的端口必须在自定义端口段内、可选的端口不能是黑名单内的端口，如留空则有系统随机选择一个端口。如未开启服务器自定义端口功能时只能从已有的端口池中随机添加一个端口  

### 服务器限制（流量/时间）
  ![服务器限制](https://github.com/noobcfy/wikis/blob/dev/Screenshots/limit.png) 
  此功能可为用户定制某台服务器具体的流量和时间限制。到期或超量时只会停止这一台服务器的中转规则。采取的策略是禁用当前用户的端口并无法开启新的转发。

### 流控策略（限速）
  ![流控策略](https://github.com/noobcfy/wikis/blob/dev/Screenshots/speedlimit.png)  
  流控策略分为固定限速和动态限速两种策略  两种可同时使用。  
  固定限速：设置一个固定限速值。用户所有端口将限速至对应的速度值  
  动态流控：是分析用户历史使用流量来定制的策略。例如：流控阈值：100，触发时间：5 流控数值 50 持续时间 3 则表示  如果用户连续5分钟使用速率达到100M的时候就开启限速 将速度限制到 50M 持续时间 3分钟.3分钟后自动解除动态的限速。此功能依赖流量统计机制 请务必打开系统管理流量统计任务否则不会生效。

### 批量转发
  ![批量转发](https://github.com/noobcfy/wikis/blob/dev/Screenshots/batch-forward.png)
  此功能可批量添加转发信息，格式为 远程地址:远程端口:自选中转端口，如自选中转端口不填写则随机添加。  
  此功能依赖自定义端口功能。如未开启、端口段不匹配、黑名单限制时 则自动过滤不予添加

### 修改转发方式
  可一键更改当前用户当前服务器所有转发方式，haproxy除外

### 导出/导入配置
  导出可导出当前用户在当前服务器上的所有规则。导入可将其他服务器或者其他面板上面的转发信息同步至当前服务器。  
  导入功能依赖条件比较严格。请注意以下情况  
  1、依赖自定义端口功能 如未开启、端口段不匹配 则自动过滤不予添加  
  2、依赖插件安装和限制状态，如导入的原规则转发方式在当前服务器上不支持时 则自动过滤不予添加
  3、依赖服务器黑名单状态，如导入的原规则端口在服务器黑名单之内时 则自动过滤不予添加

### tcping
  此功能能检测中转到被中转机的tcp联通状态。如一直超时 请检查互联状态或被中转机对应端口的监听状态。

### 故障检测
  此功能用于查看当前规则是否生成。用于管理员排查故障。如页面未有红色提示，则表示面板开启状态正常，网络不通请检查其他问题。


